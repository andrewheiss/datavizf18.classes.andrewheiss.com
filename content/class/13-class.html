---
title: "Enhancing graphics"
date: "2018-12-04"
citeproc: false
bibliography: ../../static/bib/references.bib
csl: ../../static/bib/chicago-syllabus-no-bib.csl
output:
  blogdown::html_page:
    template: ../../pandoc/toc-title_html.template
    toc: true
    toc_depth: 4
editor_options: 
  chunk_output_type: console
---

<!-- BLOGDOWN-HEAD -->
<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    background-color: #ffffff;
    color: #a0a0a0;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #a0a0a0;  padding-left: 4px; }
div.sourceCode
  { color: #1f1c1b; background-color: #ffffff; }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span. { color: #1f1c1b; } /* Normal */
code span.al { color: #bf0303; background-color: #f7e6e6; font-weight: bold; } /* Alert */
code span.an { color: #ca60ca; } /* Annotation */
code span.at { color: #0057ae; } /* Attribute */
code span.bn { color: #b08000; } /* BaseN */
code span.bu { color: #644a9b; font-weight: bold; } /* BuiltIn */
code span.cf { color: #1f1c1b; font-weight: bold; } /* ControlFlow */
code span.ch { color: #924c9d; } /* Char */
code span.cn { color: #aa5500; } /* Constant */
code span.co { color: #898887; } /* Comment */
code span.cv { color: #0095ff; } /* CommentVar */
code span.do { color: #607880; } /* Documentation */
code span.dt { color: #0057ae; } /* DataType */
code span.dv { color: #b08000; } /* DecVal */
code span.er { color: #bf0303; text-decoration: underline; } /* Error */
code span.ex { color: #0095ff; font-weight: bold; } /* Extension */
code span.fl { color: #b08000; } /* Float */
code span.fu { color: #644a9b; } /* Function */
code span.im { color: #ff5500; } /* Import */
code span.in { color: #b08000; } /* Information */
code span.kw { color: #1f1c1b; font-weight: bold; } /* Keyword */
code span.op { color: #1f1c1b; } /* Operator */
code span.ot { color: #006e28; } /* Other */
code span.pp { color: #006e28; } /* Preprocessor */
code span.re { color: #0057ae; background-color: #e0e9f8; } /* RegionMarker */
code span.sc { color: #3daee9; } /* SpecialChar */
code span.ss { color: #ff5500; } /* SpecialString */
code span.st { color: #bf0303; } /* String */
code span.va { color: #0057ae; } /* Variable */
code span.vs { color: #bf0303; } /* VerbatimString */
code span.wa { color: #bf0303; } /* Warning */
</style>
<!-- /BLOGDOWN-HEAD -->

<h2>Contents</h2>
<div id="TOC">
<ul>
<li><a href="#slides">Slides</a></li>
<li><a href="#live-code">Live code</a></li>
<li><a href="#sharing-graphics-code-and-analysis">Sharing graphics, code, and analysis</a></li>
<li><a href="#refining-and-enhancing-interactive-plots">Refining and enhancing interactive plots</a></li>
<li><a href="#refining-and-enhancing-static-plots">Refining and enhancing static plots</a><ul>
<li><a href="#install-a-vector-image-editor">Install a vector image editor</a></li>
<li><a href="#make-an-image-and-refine-it">Make an image and refine it</a></li>
</ul></li>
<li><a href="#clearest-and-muddiest-things">Clearest and muddiest things</a></li>
</ul>
</div>

<h2 id="slides">Slides</h2>
<p>No slides today!</p>
<h2 id="live-code">Live code</h2>
<p>Use this link to see the code that I’m actually typing:</p>
<ul>
<li><i class="fas fa-globe"></i> <a href="https://andhs.co/live-code" class="uri">https://andhs.co/live-code</a></li>
</ul>
<p>I’ve saved the R script to Dropbox, and that link goes to a live version of that file. Refresh or re-open the link as needed to copy/paste code I type up on the screen.</p>
<h2 id="sharing-graphics-code-and-analysis">Sharing graphics, code, and analysis</h2>
<ul>
<li>Knitting as PDF or Word</li>
<li>Knitting as HTML</li>
<li><a href="https://www.rstudio.com/products/connect/">Publishing at RStudio Connect</a></li>
<li><a href="https://rpubs.com/">Publishing at RPubs</a></li>
<li><a href="https://github.com/">GitHub</a> and <a href="https://gist.github.com/">Gists</a></li>
</ul>
<p>Entire projects:</p>
<ul>
<li><a href="https://bookdown.org/yihui/rmarkdown/rmarkdown-site.html">RMarkdown websites</a> (see <a href="http://jamessinkovic.net/capstone/index.html">James Sinkovic’s capstone</a>)</li>
<li><a href="https://bookdown.org/yihui/blogdown/">Blogdown</a></li>
<li><a href="https://bookdown.org/">Bookdown</a></li>
</ul>
<h2 id="refining-and-enhancing-interactive-plots">Refining and enhancing interactive plots</h2>
<p>This all goes beyond the scope of this class, because interactive HTML plots all require knowledge of JavaScript and we don’t have time in this class to learn a second programming language.<span><label for="sn-1" class="margin-toggle sidenote-number"></label><input type="checkbox" id="sn-1" class="margin-toggle"/><span class="sidenote">Even in a 3-credit version of this class I wouldn’t cover JavaScript and D3—it would require its own class.<br />
<br />
</span></span> But there are some cool resources for making and enhancing interactive plots:</p>
<ul>
<li><a href="https://plot.ly/"><strong>plotly</strong></a>: You’ve already been exposed to this in this class. If you feed a ggplot object to <code>ggplotly()</code> in the <code>plotly</code> library, you can have instant interactivity. There are all sorts of adjustments you can make without touching JavaScript—<a href="https://plot.ly/ggplot2/">look at the documentation for extensive examples</a>.</li>
<li><a href="https://www.highcharts.com/"><strong>Highcharts</strong></a>: This is a competitor to plotly and works kind of similarly, but doesn’t let you feed pre-made ggplot objects to it. You have to follow a different syntax. It’s very well documented, though, and you can avoid using any JavaScript. <a href="https://github.com/jbkunst/highcharter">Its R package is very well documented</a>.</li>
<li><a href="http://www.htmlwidgets.org/showcase_visNetwork.html"><strong>Lots of others</strong></a>: There are actually a bunch of other dataviz-focused JavaScript libraries. There’s <a href="http://www.htmlwidgets.org/showcase_visNetwork.html">a neat gallery of examples here</a>, with maps, flowcharts, network diagrams, etc., and these libraries are all generally well documented too.</li>
<li><a href="https://d3js.org/"><strong>D3</strong></a>: This is an entire dialect of JavaScript focused on <strong>d</strong>ata-<strong>d</strong>riven <strong>d</strong>ocuments (hence D3). It’s a very high level way of graphing things—you have to to a lot of manual labor and it can be miserable, but you can make incredible stuff. Lots of the libraries in the gallery linked above use D3 behind the scenes. R has a way of working with D3 animations within RStudio using the superbly named <a href="https://rstudio.github.io/r2d3/">R2D3 package</a>.<span><label for="sn-2" class="margin-toggle sidenote-number"></label><input type="checkbox" id="sn-2" class="margin-toggle"/><span class="sidenote">Look at its hex sticker!<br />
<br />
</span></span></li>
</ul>
<h2 id="refining-and-enhancing-static-plots">Refining and enhancing static plots</h2>
<h3 id="install-a-vector-image-editor">Install a vector image editor</h3>
<ul>
<li><a href="https://www.adobe.com/products/illustrator.html"><strong>Adobe Illustrator</strong></a>: This is the industry standard vector editor; it’s expensive, but <a href="https://byu.onthehub.com/WebStore/OfferingDetails.aspx?o=3d3dfaf5-0f77-e311-93f9-b8ca3a5db7a1">it’s free for BYU student employees</a>.</li>
<li><a href="https://inkscape.org/en/"><strong>Inkscape</strong></a>: This is an open source editor, so it’s free (yay!) but can be clunky to work with (boo). It’s sufficient for what we’re going to be doing, though.
<ul>
<li><em>Important for Mac users</em>: you have to install <a href="https://www.xquartz.org/">XQuartz</a> before installing Inkscape, which is fine because you also need it for embedding custom fonts in R anyway</li>
<li>Also, the developers haven’t paid for a macOS developer certificate, so Inkscape might show an error saying it can’t open the first time you try to open it. If that happens, go find it in your “Applications” folder, right click on Inkscape, and choose “Open”. You only have to do this one time—after you’ve opened it like this once, it will open just fine in the future.</li>
</ul></li>
<li><a href="https://www.designer.io/"><strong>Gravit Designer</strong></a>: This is a freemium vector editor that you can use in your browser or through a desktop application. It works fairly well, but the free verison won’t embed fonts. If you want to embed fonts, export your refined graphic as an SVG,<span><label for="sn-3" class="margin-toggle sidenote-number"></label><input type="checkbox" id="sn-3" class="margin-toggle"/><span class="sidenote">This is the universal vector image format, like CSV is the universal data format<br />
<br />
</span></span> open that SVG in Inkscape, and use Inkscape to export as a PDF with embedded fonts.</li>
</ul>
<h3 id="make-an-image-and-refine-it">Make an image and refine it</h3>
<p><strong>Data</strong>: <a href="/data/hot-dog-contest-winners.csv"><i class="fas fa-table"></i> Nathan’s Famous Hot Dog contest winners</a><span><label for="sn-4" class="margin-toggle">&#8853;</label><input type="checkbox" id="sn-4" class="margin-toggle"/><span class="marginnote"> Data originally from <a href="https://flowingdata.com/2009/07/02/whos-going-to-win-nathans-hot-dog-eating-contest/">FlowingData</a>.<br />
<br />
</span></span></p>
<p><strong>Plot with transparent background</strong>:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="kw">library</span>(tidyverse)</a></code></pre></div>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1">hotdogs &lt;-<span class="st"> </span><span class="kw">read_csv</span>(<span class="st">&quot;https://datavizf18.classes.andrewheiss.com/data/hot-dog-contest-winners.csv&quot;</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb2-2" data-line-number="2"><span class="st">  </span><span class="kw">rename</span>(<span class="dt">dogs =</span> <span class="st">`</span><span class="dt">Dogs eaten</span><span class="st">`</span>, <span class="dt">record =</span> <span class="st">`</span><span class="dt">New record</span><span class="st">`</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb2-3" data-line-number="3"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">record =</span> <span class="kw">factor</span>(record))</a></code></pre></div>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1">plot_hotdogs &lt;-<span class="st"> </span><span class="kw">ggplot</span>(hotdogs, <span class="kw">aes</span>(<span class="dt">x =</span> Year, <span class="dt">y =</span> dogs, <span class="dt">fill =</span> record)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb3-2" data-line-number="2"><span class="st">  </span><span class="kw">geom_col</span>() <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb3-3" data-line-number="3"><span class="st">  </span><span class="kw">scale_fill_manual</span>(<span class="dt">values =</span> <span class="kw">c</span>(<span class="st">&quot;grey80&quot;</span>, <span class="st">&quot;#FC7300&quot;</span>)) <span class="op">+</span></a>
<a class="sourceLine" id="cb3-4" data-line-number="4"><span class="st">  </span><span class="kw">scale_x_continuous</span>(<span class="dt">breaks =</span> <span class="kw">seq</span>(<span class="dv">1980</span>, <span class="dv">2010</span>, <span class="dv">2</span>), <span class="dt">expand =</span> <span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">0</span>)) <span class="op">+</span></a>
<a class="sourceLine" id="cb3-5" data-line-number="5"><span class="st">  </span><span class="kw">scale_y_continuous</span>(<span class="dt">breaks =</span> <span class="kw">seq</span>(<span class="dv">0</span>, <span class="dv">70</span>, <span class="dv">10</span>), <span class="dt">expand =</span> <span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">0</span>)) <span class="op">+</span></a>
<a class="sourceLine" id="cb3-6" data-line-number="6"><span class="st">  </span><span class="kw">guides</span>(<span class="dt">fill =</span> <span class="ot">FALSE</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb3-7" data-line-number="7"><span class="st">  </span><span class="kw">labs</span>(<span class="dt">y =</span> <span class="st">&quot;Hot dogs and buns&quot;</span>, <span class="dt">x =</span> <span class="ot">NULL</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb3-8" data-line-number="8"><span class="st">  </span><span class="kw">theme_minimal</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb3-9" data-line-number="9"><span class="st">  </span><span class="kw">theme</span>(<span class="dt">panel.background =</span> <span class="kw">element_rect</span>(<span class="dt">fill =</span> <span class="st">&quot;transparent&quot;</span>, <span class="dt">colour =</span> <span class="ot">NA</span>),</a>
<a class="sourceLine" id="cb3-10" data-line-number="10">        <span class="dt">plot.background =</span> <span class="kw">element_rect</span>(<span class="dt">fill =</span> <span class="st">&quot;transparent&quot;</span>, <span class="dt">colour =</span> <span class="ot">NA</span>),</a>
<a class="sourceLine" id="cb3-11" data-line-number="11">        <span class="dt">axis.ticks.x =</span> <span class="kw">element_line</span>(<span class="dt">size =</span> <span class="fl">0.25</span>),</a>
<a class="sourceLine" id="cb3-12" data-line-number="12">        <span class="dt">panel.grid.major.x =</span> <span class="kw">element_blank</span>(),</a>
<a class="sourceLine" id="cb3-13" data-line-number="13">        <span class="dt">panel.grid.major.y =</span> <span class="kw">element_line</span>(<span class="dt">size =</span> <span class="fl">0.5</span>, <span class="dt">linetype =</span> <span class="st">&quot;dashed&quot;</span>),</a>
<a class="sourceLine" id="cb3-14" data-line-number="14">        <span class="dt">panel.grid.minor =</span> <span class="kw">element_blank</span>())</a>
<a class="sourceLine" id="cb3-15" data-line-number="15"></a>
<a class="sourceLine" id="cb3-16" data-line-number="16">plot_hotdogs</a></code></pre></div>
<p><img src="/class/13-class_files/figure-html/plot-hotdogs-1.png" width="672" /></p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1"><span class="kw">ggsave</span>(plot_hotdogs, <span class="dt">filename =</span> <span class="st">&quot;output/hotdogs.pdf&quot;</span>, <span class="dt">device =</span> cairo_pdf,</a>
<a class="sourceLine" id="cb4-2" data-line-number="2">       <span class="dt">width =</span> <span class="dv">7</span>, <span class="dt">height =</span> <span class="dv">4</span>, <span class="dt">units =</span> <span class="st">&quot;in&quot;</span>, <span class="dt">bg =</span> <span class="st">&quot;transparent&quot;</span>)</a></code></pre></div>
<p><strong>Text for annotations</strong>:</p>
<ul>
<li>Winners from Nathan’s Hot Dog Eating Contest</li>
<li>It’s that time of year again. Since 1916, the annual eating competition has grown substantially attracting competitors from around the world</li>
<li>Frank Dellarosa eats 21 and a half HDBs over 12 minutes, breaking the previous record of 19 and a half</li>
<li>Through 2001-2005, Takeru Kobayashi wins by no less than 12 HDBs. In 2006 he only wins by 1.75. After winning 6 years in a row and setting the world record 4 times, Kobayashi places second in 2007.</li>
<li>For the first time since 1999, an American reclaims the title when Joey Chestnut consumes 66 HDBs, a new world record. Chestnut repeats in 2008.</li>
<li>Source: Wikipedia and Nathan’s Famous</li>
</ul>
<p><strong>Original enhanced plot</strong>:</p>
<figure class="fullwidth">
<div class="figure">
<img src="/images/class/hot-dogs.gif" alt="Enhanced hot dog eating contest graph" />
<p class="caption">Enhanced hot dog eating contest graph</p>
</div>
</figure>
<h2 id="clearest-and-muddiest-things">Clearest and muddiest things</h2>
<p>Go to <a href="https://goo.gl/forms/rSIbw1voOV2vWKMD2">this form</a> and answer these two questions:</p>
<ol style="list-style-type: decimal">
<li>What was the muddiest thing from class today? What are you still wondering about?</li>
<li>What was the clearest thing from class today? What was the most exciting thing you learned?</li>
</ol>
<p>I’ll compile the questions and send out answers after class.</p>
